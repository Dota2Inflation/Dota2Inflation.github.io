<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dota 2 MMR Rank Calculator</title>
    <style>
        :root {
            --dota-red: #c23c2a;
            --dota-dark: #0f1923;
            --dota-gold: #cdb373;
            --dota-blue: #1a3e6f;
            --dota-light: #f0f2f5;
        }
        
        body {
            font-family: 'Radiance', 'Arial', sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: var(--dota-dark);
            color: var(--dota-light);
            background-image: radial-gradient(circle at center, var(--dota-dark) 0%, #0a111a 100%);
        }
        
        h1 {
            color: var(--dota-gold);
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5rem;
            text-shadow: 0 0 10px rgba(205, 179, 115, 0.3);
            letter-spacing: 1px;
        }
        
        .container {
            background-color: rgba(15, 25, 35, 0.8);
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            margin-bottom: 20px;
            border: 1px solid rgba(205, 179, 115, 0.2);
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--dota-gold);
            font-size: 1.1rem;
        }
        
        input[type="number"] {
            width: 100%;
            padding: 14px;
            border: 2px solid var(--dota-blue);
            border-radius: 4px;
            box-sizing: border-box;
            font-size: 16px;
            transition: all 0.3s;
            background-color: rgba(26, 62, 111, 0.2);
            color: white;
            font-weight: bold;
        }
        
        input[type="number"]:focus {
            border-color: var(--dota-gold);
            outline: none;
            box-shadow: 0 0 10px rgba(205, 179, 115, 0.3);
        }
        
        button {
            background: linear-gradient(to bottom, var(--dota-blue), #142a4a);
            color: white;
            padding: 14px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            width: 100%;
            transition: all 0.3s;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            border: 1px solid rgba(205, 179, 115, 0.3);
        }
        
        button:hover {
            background: linear-gradient(to bottom, #1f4b8e, #142a4a);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        button.secondary {
            background: linear-gradient(to bottom, #3a3a3a, #2a2a2a);
        }
        
        button.secondary:hover {
            background: linear-gradient(to bottom, #4a4a4a, #3a3a3a);
        }
        
        .results {
            margin-top: 30px;
            display: none;
            animation: fadeIn 0.5s ease-out;
        }
        
        .results h2 {
            color: var(--dota-gold);
            border-bottom: 2px solid var(--dota-blue);
            padding-bottom: 10px;
            margin-bottom: 25px;
            font-size: 1.8rem;
        }
        
        .rank-container {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .rank-box {
            flex: 1;
            padding: 20px;
            border-radius: 6px;
            background: rgba(26, 62, 111, 0.2);
            border: 1px solid var(--dota-blue);
            position: relative;
            overflow: hidden;
        }
        
        .rank-box::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(to right, var(--dota-red), var(--dota-gold));
        }
        
        .rank-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--dota-gold);
            margin-bottom: 15px;
            text-transform: uppercase;
        }
        
        .rank-content {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .rank-image {
            width: 60px;
            height: 60px;
            object-fit: contain;
        }
        
        .rank-text {
            flex: 1;
        }
        
        .rank-name {
            font-size: 2rem;
            font-weight: 800;
            color: white;
            margin: 5px 0;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
        }
        
        .rank-range {
            color: #a7b8d1;
            font-size: 1.1rem;
        }
        
        .note {
            font-style: italic;
            color: #718096;
            margin-top: 20px;
            font-size: 0.9rem;
        }
        
        .tables-container {
            display: none;
            margin-top: 30px;
            animation: fadeIn 0.5s ease-out;
        }
        
        .mmr-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 30px;
            background-color: rgba(15, 25, 35, 0.8);
            border-radius: 6px;
            overflow: hidden;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(205, 179, 115, 0.2);
        }
        
        .mmr-table th {
            background: linear-gradient(to bottom, var(--dota-blue), #142a4a);
            color: white;
            padding: 14px;
            text-align: left;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .mmr-table td {
            padding: 12px 14px;
            border-bottom: 1px solid rgba(205, 179, 115, 0.1);
            color: #e0e0e0;
        }
        
        .mmr-table tr:nth-child(even) {
            background-color: rgba(26, 62, 111, 0.1);
        }
        
        .mmr-table tr:hover {
            background-color: rgba(205, 179, 115, 0.1);
        }
        
        .table-title {
            color: var(--dota-gold);
            margin: 30px 0 15px;
            font-size: 1.5rem;
            text-shadow: 0 0 10px rgba(205, 179, 115, 0.2);
        }
        
        .immortal {
            color: #ffcc00;
            text-shadow: 0 0 10px rgba(255, 204, 0, 0.5);
        }
        
        .rank-image-container {
            position: relative;
            width: 60px;
            height: 60px;
        }
        
        /* Vertical distribution graph styles */
        .distribution-container {
            margin-top: 40px;
            background-color: rgba(15, 25, 35, 0.8);
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(205, 179, 115, 0.2);
        }
        
        .distribution-title {
            color: var(--dota-gold);
            margin-bottom: 20px;
            font-size: 1.8rem;
            text-align: center;
        }
        
        .distribution-subtitle {
            color: #a7b8d1;
            text-align: center;
            margin-bottom: 25px;
            font-size: 1rem;
        }
        
        .distribution-graph {
            display: flex;
            height: 400px;
            margin: 30px 0;
            align-items: flex-end;
            justify-content: space-around;
            gap: 10px;
        }
        
        .graph-bar-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100%;
            width: 100%;
        }
        
        .graph-bar {
            width: 100%;
            background-color: rgba(26, 62, 111, 0.2);
            border-radius: 4px 4px 0 0;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            position: relative;
            height: 100%;
        }
        
        .graph-bar-fill {
            width: 100%;
            background: linear-gradient(to top, var(--dota-blue), #1f4b8e);
            border-radius: 4px 4px 0 0;
            transition: height 1s ease-out;
            position: relative;
        }
        
        .graph-bar-label {
            color: white;
            font-weight: bold;
            text-align: center;
            padding: 5px 0;
            width: 100%;
            margin-top: 10px;
        }
        
        .graph-bar-percentage {
            color: white;
            font-weight: bold;
            text-align: center;
            padding: 5px 0;
            position: absolute;
            top: -25px;
            width: 100%;
        }
        
        .graph-bar-immortal .graph-bar-fill {
            background: linear-gradient(to top, #ffcc00, #ff9900);
        }
        
        .graph-bar-immortal .graph-bar-label,
        .graph-bar-immortal .graph-bar-percentage {
            color: #ffcc00;
        }
        
        .rank-image-small {
            width: 40px;
            height: 40px;
            object-fit: contain;
            margin: 5px auto;
            display: block;
        }
        
        .graph-bar-immortal .rank-image-small {
            filter: drop-shadow(0 0 5px rgba(255, 204, 0, 0.7));
        }
        
        .distribution-table {
            width: 100%;
            margin-top: 30px;
            border-collapse: collapse;
            background-color: rgba(15, 25, 35, 0.8);
            border-radius: 6px;
            overflow: hidden;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(205, 179, 115, 0.2);
        }
        
        .distribution-table th {
            background: linear-gradient(to bottom, var(--dota-blue), #142a4a);
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }
        
        .distribution-table td {
            padding: 10px 12px;
            border-bottom: 1px solid rgba(205, 179, 115, 0.1);
            color: #e0e0e0;
        }
        
        .distribution-table tr:nth-child(even) {
            background-color: rgba(26, 62, 111, 0.1);
        }
        
        .distribution-table tr:hover {
            background-color: rgba(205, 179, 115, 0.1);
        }
        
        /* Progress graph styles */
        .progress-container {
            margin-top: 40px;
            background-color: rgba(15, 25, 35, 0.8);
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(205, 179, 115, 0.2);
        }
        
        .progress-title {
            color: var(--dota-gold);
            margin-bottom: 20px;
            font-size: 1.8rem;
            text-align: center;
        }
        
        .progress-graph-container {
            display: flex;
            gap: 20px;
            margin-top: 30px;
        }
        
        .progress-graph {
            flex: 1;
            padding: 20px;
            border-radius: 6px;
            background: rgba(26, 62, 111, 0.2);
            border: 1px solid var(--dota-blue);
        }
        
        .progress-graph-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--dota-gold);
            margin-bottom: 15px;
            text-align: center;
        }
        
        .progress-bar {
            height: 30px;
            background-color: rgba(26, 62, 111, 0.5);
            border-radius: 15px;
            margin: 20px 0;
            overflow: hidden;
            position: relative;
        }
        
        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(to right, var(--dota-blue), #1f4b8e);
            border-radius: 15px;
            transition: width 0.5s ease-out;
            position: relative;
        }
        
        .progress-bar-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: bold;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.7);
        }
        
        .progress-info {
            margin-top: 15px;
            font-size: 0.9rem;
            color: #a7b8d1;
            text-align: center;
        }
        
        .progress-info strong {
            color: var(--dota-gold);
        }
        
        .progress-immortal .progress-bar-fill {
            background: linear-gradient(to right, #ffcc00, #ff9900);
            width: 100% !important;
        }
        
        .progress-immortal .progress-bar-text {
            color: #ffcc00;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @font-face {
            font-family: 'Radiance';
            src: url('https://cdn.cloudflare.steamstatic.com/apps/dota2/fonts/radiance.eot');
            src: url('https://cdn.cloudflare.steamstatic.com/apps/dota2/fonts/radiance.eot?#iefix') format('embedded-opentype'),
                 url('https://cdn.cloudflare.steamstatic.com/apps/dota2/fonts/radiance.woff') format('woff'),
                 url('https://cdn.cloudflare.steamstatic.com/apps/dota2/fonts/radiance.ttf') format('truetype'),
                 url('https://cdn.cloudflare.steamstatic.com/apps/dota2/fonts/radiance.svg#radiance') format('svg');
            font-weight: normal;
            font-style: normal;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Dota 2 MMR Rank Calculator</h1>
        
        <div class="form-group">
            <label for="mmr">Enter Your Current MMR:</label>
            <input type="number" id="mmr" min="0" max="10000" placeholder="e.g. 4500">
        </div>
        
        <button onclick="calculateRanks()">Calculate My Ranks</button>
        <button class="secondary" onclick="toggleTables()">Show/Hide MMR Tables</button>
        
        <div id="results" class="results">
            <h2>Your Rank Information</h2>
            
            <div class="rank-container">
                <div class="rank-box">
                    <div class="rank-title">Current System Rank</div>
                    <div class="rank-content">
                        <div class="rank-image-container">
                            <img id="current-rank-image" class="rank-image" src="" alt="Rank Medal">
                        </div>
                        <div class="rank-text">
                            <div class="rank-name" id="current-rank-name">-</div>
                            <div class="rank-range" id="current-rank-range">-</div>
                        </div>
                    </div>
                </div>
                
                <div class="rank-box">
                    <div class="rank-title">Inflated System Rank</div>
                    <div class="rank-content">
                        <div class="rank-image-container">
                            <img id="inflated-rank-image" class="rank-image" src="" alt="Rank Medal">
                        </div>
                        <div class="rank-text">
                            <div class="rank-name" id="inflated-rank-name">-</div>
                            <div class="rank-range" id="inflated-rank-range">-</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="note">
                Note: Players above 5620 MMR in current system or 8500 in inflated system are Immortal rank.
            </div>
            
            <!-- Progress to next rank section -->
            <div class="progress-container">
                <h2 class="progress-title">Progress to Next Rank</h2>
                
                <div class="progress-graph-container">
                    <div class="progress-graph">
                        <div class="progress-graph-title">Current System</div>
                        <div id="current-progress-bar-container" class="progress-bar">
                            <div id="current-progress-bar" class="progress-bar-fill" style="width: 0%">
                                <div class="progress-bar-text">0%</div>
                            </div>
                        </div>
                        <div id="current-progress-info" class="progress-info">
                            Enter your MMR to see progress to next rank
                        </div>
                    </div>
                    
                    <div class="progress-graph">
                        <div class="progress-graph-title">Inflated System</div>
                        <div id="inflated-progress-bar-container" class="progress-bar">
                            <div id="inflated-progress-bar" class="progress-bar-fill" style="width: 0%">
                                <div class="progress-bar-text">0%</div>
                            </div>
                        </div>
                        <div id="inflated-progress-info" class="progress-info">
                            Enter your MMR to see progress to next rank
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="tables-container" class="tables-container">
        <h2 class="table-title">Current MMR System</h2>
        <table class="mmr-table">
            <thead>
                <tr>
                    <th>Rank</th>
                    <th>Min MMR</th>
                    <th>Max MMR</th>
                </tr>
            </thead>
            <tbody id="current-mmr-table">
                <!-- Filled by JavaScript -->
            </tbody>
        </table>
        
        <h2 class="table-title">Inflated MMR System</h2>
        <table class="mmr-table">
            <thead>
                <tr>
                    <th>Rank</th>
                    <th>Min MMR</th>
                    <th>Max MMR</th>
                </tr>
            </thead>
            <tbody id="inflated-mmr-table">
                <!-- Filled by JavaScript -->
            </tbody>
        </table>
    </div>

    <!-- Distribution Graph Section -->
    <div class="distribution-container">
        <h2 class="distribution-title">Dota 2 Rank Distribution</h2>
        <div class="distribution-subtitle">Based on inflated MMR system (Total players: 6,746,059) as of April 2025</div>
        
        <div class="distribution-graph" id="distribution-graph">
            <!-- Filled by JavaScript -->
        </div>
        
        <table class="distribution-table">
            <thead>
                <tr>
                    <th>Rank</th>
                    <th>% of Players</th>
                    <th>Approx. Players</th>
                    <th>Inflated MMR Range</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Herald</td>
                    <td>13.85%</td>
                    <td>934,000</td>
                    <td>1 – 1214</td>
                </tr>
                <tr>
                    <td>Guardian</td>
                    <td>26.15%</td>
                    <td>1,764,000</td>
                    <td>1215 – 2429</td>
                </tr>
                <tr>
                    <td>Crusader</td>
                    <td>25%</td>
                    <td>1,686,515</td>
                    <td>2430 – 3644</td>
                </tr>
                <tr>
                    <td>Archon</td>
                    <td>22%</td>
                    <td>1,484,133</td>
                    <td>3645 – 4859</td>
                </tr>
                <tr>
                    <td>Legend</td>
                    <td>5.3%</td>
                    <td>357,000</td>
                    <td>4860 – 6074</td>
                </tr>
                <tr>
                    <td>Ancient</td>
                    <td>2.2%</td>
                    <td>148,000</td>
                    <td>6075 – 7289</td>
                </tr>
                <tr>
                    <td>Divine</td>
                    <td>1.1%</td>
                    <td>74,000</td>
                    <td>7290 – 8500</td>
                </tr>
                <tr>
                    <td class="immortal">Immortal</td>
                    <td class="immortal">0.5%</td>
                    <td class="immortal">33,730</td>
                    <td class="immortal">8501+</td>
                </tr>
            </tbody>
        </table>
    </div>

    <script>
        // Convert number to Roman numeral
        function toRoman(num) {
            const romanNumerals = [
                '', 'I', 'II', 'III', 'IV', 'V', 'VI', 'VII', 'VIII', 'IX', 'X'
            ];
            return romanNumerals[num] || num;
        }

        // Current MMR data (with Roman numerals)
        const currentRanks = [
            { name: "Herald", level: 1, min: 1, max: 154 },
            { name: "Herald", level: 2, min: 154, max: 308 },
            { name: "Herald", level: 3, min: 308, max: 462 },
            { name: "Herald", level: 4, min: 462, max: 616 },
            { name: "Herald", level: 5, min: 616, max: 769 },
            { name: "Guardian", level: 1, min: 770, max: 924 },
            { name: "Guardian", level: 2, min: 924, max: 1078 },
            { name: "Guardian", level: 3, min: 1078, max: 1232 },
            { name: "Guardian", level: 4, min: 1232, max: 1386 },
            { name: "Guardian", level: 5, min: 1386, max: 1540 },
            { name: "Crusader", level: 1, min: 1540, max: 1694 },
            { name: "Crusader", level: 2, min: 1694, max: 1848 },
            { name: "Crusader", level: 3, min: 1848, max: 2002 },
            { name: "Crusader", level: 4, min: 2002, max: 2156 },
            { name: "Crusader", level: 5, min: 2156, max: 2310 },
            { name: "Archon", level: 1, min: 2310, max: 2464 },
            { name: "Archon", level: 2, min: 2464, max: 2618 },
            { name: "Archon", level: 3, min: 2618, max: 2772 },
            { name: "Archon", level: 4, min: 2772, max: 2926 },
            { name: "Archon", level: 5, min: 2926, max: 3080 },
            { name: "Legend", level: 1, min: 3080, max: 3234 },
            { name: "Legend", level: 2, min: 3234, max: 3388 },
            { name: "Legend", level: 3, min: 3388, max: 3542 },
            { name: "Legend", level: 4, min: 3542, max: 3696 },
            { name: "Legend", level: 5, min: 3696, max: 3850 },
            { name: "Ancient", level: 1, min: 3850, max: 4004 },
            { name: "Ancient", level: 2, min: 4004, max: 4158 },
            { name: "Ancient", level: 3, min: 4158, max: 4312 },
            { name: "Ancient", level: 4, min: 4312, max: 4466 },
            { name: "Ancient", level: 5, min: 4466, max: 4620 },
            { name: "Divine", level: 1, min: 4620, max: 4820 },
            { name: "Divine", level: 2, min: 4820, max: 5020 },
            { name: "Divine", level: 3, min: 5020, max: 5220 },
            { name: "Divine", level: 4, min: 5220, max: 5420 },
            { name: "Divine", level: 5, min: 5420, max: 5620 }
        ];

        // Inflated MMR data
        const inflatedRanks = [
            { name: "Herald", level: 1, min: 1, max: 242 },
            { name: "Herald", level: 2, min: 243, max: 485 },
            { name: "Herald", level: 3, min: 486, max: 728 },
            { name: "Herald", level: 4, min: 729, max: 971 },
            { name: "Herald", level: 5, min: 972, max: 1214 },
            { name: "Guardian", level: 1, min: 1215, max: 1457 },
            { name: "Guardian", level: 2, min: 1458, max: 1700 },
            { name: "Guardian", level: 3, min: 1701, max: 1943 },
            { name: "Guardian", level: 4, min: 1944, max: 2186 },
            { name: "Guardian", level: 5, min: 2187, max: 2429 },
            { name: "Crusader", level: 1, min: 2430, max: 2672 },
            { name: "Crusader", level: 2, min: 2673, max: 2915 },
            { name: "Crusader", level: 3, min: 2916, max: 3158 },
            { name: "Crusader", level: 4, min: 3159, max: 3401 },
            { name: "Crusader", level: 5, min: 3402, max: 3644 },
            { name: "Archon", level: 1, min: 3645, max: 3887 },
            { name: "Archon", level: 2, min: 3888, max: 4130 },
            { name: "Archon", level: 3, min: 4131, max: 4373 },
            { name: "Archon", level: 4, min: 4374, max: 4616 },
            { name: "Archon", level: 5, min: 4617, max: 4859 },
            { name: "Legend", level: 1, min: 4860, max: 5102 },
            { name: "Legend", level: 2, min: 5103, max: 5345 },
            { name: "Legend", level: 3, min: 5346, max: 5588 },
            { name: "Legend", level: 4, min: 5589, max: 5831 },
            { name: "Legend", level: 5, min: 5832, max: 6074 },
            { name: "Ancient", level: 1, min: 6075, max: 6317 },
            { name: "Ancient", level: 2, min: 6318, max: 6560 },
            { name: "Ancient", level: 3, min: 6561, max: 6803 },
            { name: "Ancient", level: 4, min: 6804, max: 7046 },
            { name: "Ancient", level: 5, min: 7047, max: 7289 },
            { name: "Divine", level: 1, min: 7290, max: 7532 },
            { name: "Divine", level: 2, min: 7533, max: 7775 },
            { name: "Divine", level: 3, min: 7776, max: 8018 },
            { name: "Divine", level: 4, min: 8019, max: 8261 },
            { name: "Divine", level: 5, min: 8262, max: 8500 }
        ];

        // Rank distribution data
        const rankDistribution = [
            { rank: "Herald", percentage: 13.85, players: 934000, mmrRange: "1 – 1214", level: 1 },
            { rank: "Guardian", percentage: 26.15, players: 1764000, mmrRange: "1215 – 2429", level: 1 },
            { rank: "Crusader", percentage: 25, players: 1686515, mmrRange: "2430 – 3644", level: 1 },
            { rank: "Archon", percentage: 22, players: 1484133, mmrRange: "3645 – 4859", level: 1 },
            { rank: "Legend", percentage: 5.3, players: 357000, mmrRange: "4860 – 6074", level: 1 },
            { rank: "Ancient", percentage: 2.2, players: 148000, mmrRange: "6075 – 7289", level: 1 },
            { rank: "Divine", percentage: 1.1, players: 74000, mmrRange: "7290 – 8500", level: 1 },
            { rank: "Immortal", percentage: 0.5, players: 33730, mmrRange: "8501+", level: 0 }
        ];

        // Initialize tables and graph when page loads
        window.onload = function() {
            populateTable("current-mmr-table", currentRanks);
            populateTable("inflated-mmr-table", inflatedRanks);
            createDistributionGraph();
        };

        function populateTable(tableId, ranks) {
            const tableBody = document.getElementById(tableId);
            tableBody.innerHTML = "";
            
            ranks.forEach(rank => {
                const row = document.createElement("tr");
                const displayName = `${rank.name} ${toRoman(rank.level)}`;
                row.innerHTML = `
                    <td>${displayName}</td>
                    <td>${rank.min}</td>
                    <td>${rank.max}</td>
                `;
                tableBody.appendChild(row);
            });

            // Add Immortal row
            const immortalRow = document.createElement("tr");
            const isCurrent = tableId === "current-mmr-table";
            const minMMR = isCurrent ? 5621 : 8501;
            immortalRow.innerHTML = `
                <td class="immortal">Immortal</td>
                <td class="immortal">${minMMR}</td>
                <td class="immortal">∞</td>
            `;
            tableBody.appendChild(immortalRow);
        }

        function createDistributionGraph() {
            const graphContainer = document.getElementById("distribution-graph");
            graphContainer.innerHTML = "";
            
            rankDistribution.forEach(item => {
                const barContainer = document.createElement("div");
                barContainer.className = "graph-bar-container";
                
                const bar = document.createElement("div");
                bar.className = "graph-bar";
                if (item.rank === "Immortal") {
                    bar.classList.add("graph-bar-immortal");
                }
                
                const barFill = document.createElement("div");
                barFill.className = "graph-bar-fill";
                barFill.style.height = `${item.percentage * 3}px`; // Scale for better visibility
                
                const barPercentage = document.createElement("div");
                barPercentage.className = "graph-bar-percentage";
                barPercentage.textContent = `${item.percentage}%`;
                
                bar.appendChild(barFill);
                bar.appendChild(barPercentage);
                
                // Add rank label below the bar
                const barLabel = document.createElement("div");
                barLabel.className = "graph-bar-label";
                barLabel.textContent = item.rank;
                
                // Add medal image for all ranks
                const medalImg = document.createElement("img");
                medalImg.className = "rank-image-small";
                medalImg.src = getRankImage(item.rank, item.rank === "Immortal" ? 0 : 1);
                medalImg.alt = `${item.rank} ${item.rank === "Immortal" ? "" : "1"}`;
                barLabel.appendChild(document.createElement("br"));
                barLabel.appendChild(medalImg);
                
                barContainer.appendChild(bar);
                barContainer.appendChild(barLabel);
                graphContainer.appendChild(barContainer);
            });
        }

        function getRankImage(rankName, level) {
            if (rankName === "Immortal") return "medals/Immortal.webp";
            
            // Remove any existing Roman numerals
            const baseName = rankName.replace(/ [IVXLCDM]+$/, '');
            const imageName = `${baseName} ${level}`;
            return `medals/${imageName}.webp`;
        }

        function calculateRanks() {
            const mmrInput = document.getElementById("mmr");
            const mmr = parseInt(mmrInput.value);
            const resultsDiv = document.getElementById("results");
            
            // Validate input
            if (isNaN(mmr)) {
                alert("Please enter a valid MMR number");
                return;
            }
            
            if (mmr < 0) {
                alert("MMR cannot be negative");
                return;
            }
            
            // Find current rank
            let currentRank = "Unranked";
            let currentLevel = 0;
            let currentRange = "MMR: 0";
            let isCurrentImmortal = mmr > 5620;
            let currentImage = "medals/Unranked.webp";
            let currentProgress = 0;
            let currentProgressText = "You are at the highest rank (Immortal)";
            let currentNextRank = "";

            if (isCurrentImmortal) {
                currentRank = "Immortal";
                currentRange = "MMR: 5621+";
                currentImage = "medals/Immortal.webp";
                currentProgress = 100;
                currentProgressText = "You are at the highest rank (Immortal)";
            } else {
                for (const rank of currentRanks) {
                    if (mmr >= rank.min && mmr <= rank.max) {
                        currentRank = rank.name;
                        currentLevel = rank.level;
                        currentRange = `MMR Range: ${rank.min}-${rank.max}`;
                        currentImage = getRankImage(rank.name, rank.level);
                        
                        // Calculate progress to next rank
                        const currentRangeWidth = rank.max - rank.min;
                        const currentPosition = mmr - rank.min;
                        currentProgress = (currentPosition / currentRangeWidth) * 100;
                        
                        // Find next rank
                        const currentRankIndex = currentRanks.findIndex(r => 
                            r.name === rank.name && r.level === rank.level);
                        
                        if (currentRankIndex < currentRanks.length - 1) {
                            const nextRank = currentRanks[currentRankIndex + 1];
                            currentNextRank = `${nextRank.name} ${toRoman(nextRank.level)}`;
                            const mmrNeeded = nextRank.min - mmr;
                            currentProgressText = `${Math.round(currentProgress)}% to ${currentNextRank} (${mmrNeeded} MMR needed)`;
                        } else if (rank.name === "Divine" && rank.level === 5) {
                            currentNextRank = "Immortal";
                            const mmrNeeded = 5621 - mmr;
                            currentProgressText = `${Math.round(currentProgress)}% to Immortal (${mmrNeeded} MMR needed)`;
                        } else {
                            currentProgressText = "You are at the highest rank for this tier";
                        }
                        break;
                    }
                }
            }
            
            // Find inflated rank
            let inflatedRank = "Unranked";
            let inflatedLevel = 0;
            let inflatedRange = "MMR: 0";
            let isInflatedImmortal = mmr > 8500;
            let inflatedImage = "medals/Unranked.webp";
            let inflatedProgress = 0;
            let inflatedProgressText = "You are at the highest rank (Immortal)";
            let inflatedNextRank = "";

            if (isInflatedImmortal) {
                inflatedRank = "Immortal";
                inflatedRange = "MMR: 8501+";
                inflatedImage = "medals/Immortal.webp";
                inflatedProgress = 100;
                inflatedProgressText = "You are at the highest rank (Immortal)";
            } else {
                for (const rank of inflatedRanks) {
                    if (mmr >= rank.min && mmr <= rank.max) {
                        inflatedRank = rank.name;
                        inflatedLevel = rank.level;
                        inflatedRange = `MMR Range: ${rank.min}-${rank.max}`;
                        inflatedImage = getRankImage(rank.name, rank.level);
                        
                        // Calculate progress to next rank
                        const inflatedRangeWidth = rank.max - rank.min;
                        const inflatedPosition = mmr - rank.min;
                        inflatedProgress = (inflatedPosition / inflatedRangeWidth) * 100;
                        
                        // Find next rank
                        const inflatedRankIndex = inflatedRanks.findIndex(r => 
                            r.name === rank.name && r.level === rank.level);
                        
                        if (inflatedRankIndex < inflatedRanks.length - 1) {
                            const nextRank = inflatedRanks[inflatedRankIndex + 1];
                            inflatedNextRank = `${nextRank.name} ${toRoman(nextRank.level)}`;
                            const mmrNeeded = nextRank.min - mmr;
                            inflatedProgressText = `${Math.round(inflatedProgress)}% to ${inflatedNextRank} (${mmrNeeded} MMR needed)`;
                        } else if (rank.name === "Divine" && rank.level === 5) {
                            inflatedNextRank = "Immortal";
                            const mmrNeeded = 8501 - mmr;
                            inflatedProgressText = `${Math.round(inflatedProgress)}% to Immortal (${mmrNeeded} MMR needed)`;
                        } else {
                            inflatedProgressText = "You are at the highest rank for this tier";
                        }
                        break;
                    }
                }
            }
            
            // Display results
            const currentRankElement = document.getElementById("current-rank-name");
            const currentDisplayName = isCurrentImmortal ? currentRank : `${currentRank} ${toRoman(currentLevel)}`;
            currentRankElement.textContent = currentDisplayName;
            currentRankElement.className = isCurrentImmortal ? "rank-name immortal" : "rank-name";
            
            document.getElementById("current-rank-range").textContent = currentRange;
            document.getElementById("current-rank-image").src = currentImage;
            document.getElementById("current-rank-image").alt = currentDisplayName;

            const inflatedRankElement = document.getElementById("inflated-rank-name");
            const inflatedDisplayName = isInflatedImmortal ? inflatedRank : `${inflatedRank} ${toRoman(inflatedLevel)}`;
            inflatedRankElement.textContent = inflatedDisplayName;
            inflatedRankElement.className = isInflatedImmortal ? "rank-name immortal" : "rank-name";
            
            document.getElementById("inflated-rank-range").textContent = inflatedRange;
            document.getElementById("inflated-rank-image").src = inflatedImage;
            document.getElementById("inflated-rank-image").alt = inflatedDisplayName;
            
            // Update progress bars
            const currentProgressBar = document.getElementById("current-progress-bar");
            const currentProgressBarContainer = document.getElementById("current-progress-bar-container");
            const currentProgressTextElement = document.getElementById("current-progress-info");
            const inflatedProgressBar = document.getElementById("inflated-progress-bar");
            const inflatedProgressBarContainer = document.getElementById("inflated-progress-bar-container");
            const inflatedProgressTextElement = document.getElementById("inflated-progress-info");
            
            // Handle current system progress
            if (isCurrentImmortal) {
                currentProgressBarContainer.classList.add("progress-immortal");
                currentProgressBar.style.width = "100%";
                currentProgressBar.querySelector('.progress-bar-text').textContent = "100%";
                currentProgressTextElement.innerHTML = "You are at the highest rank (Immortal)";
            } else {
                currentProgressBarContainer.classList.remove("progress-immortal");
                currentProgressBar.style.width = `${currentProgress}%`;
                currentProgressBar.querySelector('.progress-bar-text').textContent = `${Math.round(currentProgress)}%`;
                currentProgressTextElement.innerHTML = currentProgressText;
            }
            
            // Handle inflated system progress
            if (isInflatedImmortal) {
                inflatedProgressBarContainer.classList.add("progress-immortal");
                inflatedProgressBar.style.width = "100%";
                inflatedProgressBar.querySelector('.progress-bar-text').textContent = "100%";
                inflatedProgressTextElement.innerHTML = "You are at the highest rank (Immortal)";
            } else {
                inflatedProgressBarContainer.classList.remove("progress-immortal");
                inflatedProgressBar.style.width = `${inflatedProgress}%`;
                inflatedProgressBar.querySelector('.progress-bar-text').textContent = `${Math.round(inflatedProgress)}%`;
                inflatedProgressTextElement.innerHTML = inflatedProgressText;
            }
            
            // Show results section
            resultsDiv.style.display = "block";
        }

        function toggleTables() {
            const tablesContainer = document.getElementById("tables-container");
            if (tablesContainer.style.display === "none" || tablesContainer.style.display === "") {
                tablesContainer.style.display = "block";
            } else {
                tablesContainer.style.display = "none";
            }
        }
    </script>
</body>
</html>
